<!doctype html>
<html class="no-js" lang="zxx">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Ageafire | @ViewData["Title"]</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="~/images/logotek.png">
    <!-- Material Design Iconic Font-V2.2.0 -->
    <link rel="stylesheet" href="~/css/material-design-iconic-font.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="~/css/font-awesome.min.css">
    <!-- Font Awesome Stars-->
    <link rel="stylesheet" href="~/css/fontawesome-stars.css">
    <!-- Meanmenu CSS -->
    <link rel="stylesheet" href="~/css/meanmenu.css">
    <!-- owl carousel CSS -->
    <link rel="stylesheet" href="~/css/owl.carousel.min.css">
    <!-- Slick Carousel CSS -->
    <link rel="stylesheet" href="~/css/slick.css">
    <!-- Animate CSS -->
    <link rel="stylesheet" href="~/css/animate.css">
    <!-- Jquery-ui CSS -->
    <link rel="stylesheet" href="~/css/jquery-ui.min.css">
    <!-- Venobox CSS -->
    <link rel="stylesheet" href="~/css/venobox.css">
    <!-- Nice Select CSS -->
    <link rel="stylesheet" href="~/css/nice-select.css">
    <!-- Magnific Popup CSS -->
    <link rel="stylesheet" href="~/css/magnific-popup.css">
    <!-- Bootstrap V4.1.3 Fremwork CSS -->
    <link rel="stylesheet" href="~/css/bootstrap.min.css">
    <!-- Helper CSS -->
    <link rel="stylesheet" href="~/css/helper.css">
    <!-- Main Style CSS -->
    <link rel="stylesheet" href="~/css/style.css">
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="~/css/responsive.css">
    <!-- Modernizr js -->
    <script src="~/js/vendor/modernizr-2.8.3.min.js"></script>
</head>
<body>
    <!-- Begin Body Wrapper -->
    <div class="body-wrapper">
        <!-- Begin Header Area -->
        <header>
            <!-- Header Top Area End Here -->
            @await Component.InvokeAsync("ContactNav")
            <!-- Begin Header Middle Area -->
            <div class="header-middle pl-sm-0 pr-sm-0 pl-xs-0 pr-xs-0">
                <div class="container">
                    <div class="row">
                        <!-- Begin Header Logo Area -->
                        <div class="col-lg-3">
                            <div class="logo pb-sm-30 pb-xs-30">
                                <a asp-action="Index" asp-controller="Home">
                                    <img width="150" src="~/images/agea-logo1.jpg" alt="">
                                </a>
                            </div>
                        </div>
                        <!-- Header Logo Area End Here -->
                        <!-- Begin Header Middle Right Area -->
                        <div class="col-lg-9 pl-0 ml-sm-15 ml-xs-15">
                            <!-- Begin Header Middle Searchbox Area -->
                            <form asp-action="Search" asp-controller="Home" method="get" class="hm-searchbox">
                                <input type="text" name="categoryKey" placeholder="Enter your category key ...">
                                <button class="li-btn" type="submit"><i class="fa fa-search"></i></button>
                            </form>
                            <!-- Header Middle Searchbox Area End Here -->
                            <!-- Begin Header Middle Right Area -->
                            <div class="header-middle-right">
                                <ul class="hm-menu">
                                    <!-- Begin Header Middle Wishlist Area -->
                                    <li class="hm-wishlist">
                                        <a asp-action="Wishlist" asp-controller="Home">
                                            <span class="cart-item-count wishlist-item-count">0</span>
                                            <i class="fa fa-heart-o"></i>
                                        </a>
                                    </li>
                                    <!-- Header Middle Wishlist Area End Here -->
                                    <!-- Begin Header Mini Cart Area -->
                                    <li class="hm-minicart">
                                        <div class="hm-minicart-trigger">
                                            <span class="item-icon"></span>
                                            <span class="item-text shop-price-icon">
                                                $0
                                                <span class="cart-item-count">0</span>
                                            </span>
                                        </div>
                                        <span></span>
                                        <div class="minicart">
                                            <ul class="minicart-product-list">
                                            </ul>
                                            <p class="minicart-total">SUBTOTAL: <span class="shop-price-banner">$0</span></p>
                                            <div class="minicart-button">
                                                <a asp-action="ShoppingCard" asp-controller="Home" class="li-button li-button-dark li-button-fullwidth li-button-sm">
                                                    <span>View Full Cart</span>
                                                </a>
                                                <a asp-action="Checkout" asp-controller="Home" class="li-button li-button-fullwidth li-button-sm">
                                                    <span>Checkout</span>
                                                </a>
                                            </div>
                                        </div>
                                    </li>
                                    <!-- Header Mini Cart Area End Here -->
                                </ul>
                            </div>
                            <!-- Header Middle Right Area End Here -->
                        </div>
                        <!-- Header Middle Right Area End Here -->
                    </div>
                </div>
            </div>
            <!-- Header Middle Area End Here -->
            <!-- Begin Header Bottom Area -->
            <div class="header-bottom header-sticky d-none d-lg-block">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <!-- Begin Header Bottom Menu Area -->
                            <div class="hb-menu hb-menu-2 d-xl-block">
                                <nav>
                                    <ul>
                                        <li><a asp-action="Index" asp-controller="Home">Home</a></li>
                                        <li><a asp-action="Index" asp-controller="AboutUs">About Us</a></li>
                                        <li><a asp-action="Index" asp-controller="Shop">Shop</a></li>
                                        <li><a asp-action="Index" asp-controller="Products">Products</a></li>
                                        <li><a asp-action="Index" asp-controller="Blog">Blog</a></li>
                                        <li><a asp-action="Index" asp-controller="Contact">Contact</a></li>
                                        <!-- Begin Header Bottom Menu Information Area -->
                                        @*@await Component.InvokeAsync("ContactHeader")*@
                                        <!-- Header Bottom Menu Information Area End Here -->
                                    </ul>
                                </nav>
                            </div>
                            <!-- Header Bottom Menu Area End Here -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- Header Bottom Area End Here -->
            <!-- Begin Mobile Menu Area -->
            <div class="mobile-menu-area d-lg-none d-xl-none col-12">
                <div class="container">
                    <div class="row">
                        <div class="mobile-menu">
                        </div>
                    </div>
                </div>
            </div>
            <!-- Mobile Menu Area End Here -->
        </header>
        <!-- Header Area End Here -->
        @RenderBody()
        <!-- Begin Footer Area -->
        <div class="footer">
            <!-- Begin Footer Static Top Area -->
            <div class="footer-static-top">
                <div class="container">
                    <!-- Begin Footer Shipping Area -->
                    <div class="footer-shipping pt-60 pb-55 pb-xs-25">
                        <div class="row">
                            <!-- Begin Li's Shipping Inner Box Area -->
                            <div class="col-lg-3 col-md-6 col-sm-6 pb-sm-55 pb-xs-55">
                                <div class="li-shipping-inner-box">
                                    <div class="shipping-icon">
                                        <img src="~/images/shipping-icon/1.png" alt="Shipping Icon">
                                    </div>
                                    <div class="shipping-text">
                                        <h2>Free Delivery</h2>
                                        <p>And free returns. See checkout for delivery dates.</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Li's Shipping Inner Box Area End Here -->
                            <!-- Begin Li's Shipping Inner Box Area -->
                            <div class="col-lg-3 col-md-6 col-sm-6 pb-sm-55 pb-xs-55">
                                <div class="li-shipping-inner-box">
                                    <div class="shipping-icon">
                                        <img src="~/images/shipping-icon/2.png" alt="Shipping Icon">
                                    </div>
                                    <div class="shipping-text">
                                        <h2>Safe Payment</h2>
                                        <p>Pay with the world's most popular and secure payment methods.</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Li's Shipping Inner Box Area End Here -->
                            <!-- Begin Li's Shipping Inner Box Area -->
                            <div class="col-lg-3 col-md-6 col-sm-6 pb-xs-30">
                                <div class="li-shipping-inner-box">
                                    <div class="shipping-icon">
                                        <img src="~/images/shipping-icon/3.png" alt="Shipping Icon">
                                    </div>
                                    <div class="shipping-text">
                                        <h2>Shop with Confidence</h2>
                                        <p>Our Buyer Protection covers your purchasefrom click to delivery.</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Li's Shipping Inner Box Area End Here -->
                            <!-- Begin Li's Shipping Inner Box Area -->
                            <div class="col-lg-3 col-md-6 col-sm-6 pb-xs-30">
                                <div class="li-shipping-inner-box">
                                    <div class="shipping-icon">
                                        <img src="~/images/shipping-icon/4.png" alt="Shipping Icon">
                                    </div>
                                    <div class="shipping-text">
                                        <h2>24/7 Help Center</h2>
                                        <p>Have a question? Call a Specialist or chat online.</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Li's Shipping Inner Box Area End Here -->
                        </div>
                    </div>
                    <!-- Footer Shipping Area End Here -->
                </div>
            </div>
            <!-- Footer Static Top Area End Here -->
            <!-- Begin Footer Static Middle Area -->
            <div class="footer-static-middle">
                <div class="container">
                    <div class="footer-logo-wrap pt-50 pb-35">
                        <div class="row">
                            <!-- Begin Footer Logo Area -->
                            @await Component.InvokeAsync("ContactFooter")
                            <!-- Footer Logo Area End Here -->
                            <!-- Begin Footer Block Area -->
                            <div class="col-lg-4 col-md-3 col-sm-6">
                                <div class="footer-block">
                                    <h3 class="footer-block-title">Product</h3>
                                    <ul>
                                        <li><a asp-action="Index" asp-controller="Shop">Shop</a></li>
                                        <li><a asp-action="Index" asp-controller="Products">Products</a></li>
                                        <li><a asp-action="Index" asp-controller="Categories">Categories</a></li>
                                        <li><a asp-action="Index" asp-controller="Blog">Blog</a></li>
                                        <li><a asp-action="Index" asp-controller="Contact">Contact us</a></li>
                                    </ul>
                                </div>
                            </div>
                            <!-- Footer Block Area End Here -->
                            <!-- Begin Footer Block Area -->
                            <div class="col-lg-4">
                                <div class="footer-block">
                                    <h3 class="footer-block-title">Follow Us</h3>
                                    <ul class="social-link">
                                        <li class="twitter">
                                            <a href="https://twitter.com/" data-toggle="tooltip" target="_blank" title="Twitter">
                                                <i class="fa fa-twitter"></i>
                                            </a>
                                        </li>
                                        <li class="rss">
                                            <a href="https://rss.com/" data-toggle="tooltip" target="_blank" title="RSS">
                                                <i class="fa fa-rss"></i>
                                            </a>
                                        </li>
                                        <li class="google-plus">
                                            <a href="https://www.plus.google.com/discover" data-toggle="tooltip" target="_blank" title="Google +">
                                                <i class="fa fa-google-plus"></i>
                                            </a>
                                        </li>
                                        <li class="facebook">
                                            <a href="https://www.facebook.com/" data-toggle="tooltip" target="_blank" title="Facebook">
                                                <i class="fa fa-facebook"></i>
                                            </a>
                                        </li>
                                        <li class="youtube">
                                            <a href="https://www.youtube.com/" data-toggle="tooltip" target="_blank" title="Youtube">
                                                <i class="fa fa-youtube"></i>
                                            </a>
                                        </li>
                                        <li class="instagram">
                                            <a href="https://www.instagram.com/" data-toggle="tooltip" target="_blank" title="Instagram">
                                                <i class="fa fa-instagram"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <!-- Footer Block Area End Here -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- Footer Static Middle Area End Here -->
            <!-- Begin Footer Static Bottom Area -->
            <div class="footer-static-bottom pt-55 pb-55">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <!-- Begin Copyright Area -->
                            <div class="copyright text-center pt-25">
                                <span><a target="_blank" href="">Copyright 2003 - @DateTime.Now.Year Ageafire Fire Safety Equipment Company, LLC. All Rights Reserved</a></span>
                            </div>
                            <!-- Copyright Area End Here -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- Footer Static Bottom Area End Here -->
        </div>
        <!-- Footer Area End Here -->
    </div>
    <!-- Body Wrapper End Here -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/drift-zoom/1.3.1/Drift.min.js"></script>
    <!-- jQuery-V1.12.4 -->
    <script src="~/js/vendor/jquery-1.12.4.min.js"></script>
    <!-- Popper js -->
    <script src="~/js/vendor/popper.min.js"></script>
    <!-- Bootstrap V4.1.3 Fremwork js -->
    <script src="~/js/bootstrap.min.js"></script>
    <!-- Ajax Mail js -->
    <script src="~/js/ajax-mail.js"></script>
    <!-- Meanmenu js -->
    <script src="~/js/jquery.meanmenu.min.js"></script>
    <!-- Wow.min js -->
    <script src="~/js/wow.min.js"></script>
    <!-- Slick Carousel js -->
    <script src="~/js/slick.min.js"></script>
    <!-- Owl Carousel-2 js -->
    <script src="~/js/owl.carousel.min.js"></script>
    <!-- Magnific popup js -->
    <script src="~/js/jquery.magnific-popup.min.js"></script>
    <!-- Isotope js -->
    <script src="~/js/isotope.pkgd.min.js"></script>
    <!-- Imagesloaded js -->
    <script src="~/js/imagesloaded.pkgd.min.js"></script>
    <!-- Mixitup js -->
    <script src="~/js/jquery.mixitup.min.js"></script>
    <!-- Countdown -->
    <script src="~/js/jquery.countdown.min.js"></script>
    <!-- Counterup -->
    <script src="~/js/jquery.counterup.min.js"></script>
    <!-- Waypoints -->
    <script src="~/js/waypoints.min.js"></script>
    <!-- Barrating -->
    <script src="~/js/jquery.barrating.min.js"></script>
    <!-- Jquery-ui -->
    <script src="~/js/jquery-ui.min.js"></script>
    <!-- Venobox -->
    <script src="~/js/venobox.min.js"></script>
    <!-- Nice Select js -->
    <script src="~/js/jquery.nice-select.min.js"></script>
    <!-- ScrollUp js -->
    <script src="~/js/scrollUp.min.js"></script>
    <!-- Main/Activator js -->
    <script src="~/js/main.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    @RenderSection("Scripts", false)
    <script>
        $(document).ready(function () {
            LoadShopCard();
            ClickCartInit();
            RemoveItemInit();
            ClickCartInitWishList();
            LoadWishList();
        })
        function LoadShopCard() {
            var data = localStorage.getItem("shoping-keys")
            if (data) {
            var splited = data.split(",")
            var group_of_items = groupBy(splited);
                var keys = returnKeys(group_of_items);
                var price = 0;
                var unitCount = 0;
            $.ajax({
                type: "POST",
                url: "@Url.Action("GetShop", "Home")",
                data: JSON.stringify(keys),
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    var item = "";
                    for (var i = 0; i < data.length; i++) {
                        var existed = group_of_items.find(({ id }) => id === `${data[i].id}`);
                        console.log(existed + "existed")
                        console.log(group_of_items)
                         item += `<li id="li${data[i].id}">
                                                    <a href="/home/details/${data[i].id}" class="minicart-product-image">
                                                        <img src="@(Context.Request.Scheme + "://" + Context.Request.Host.Value)/uploads/${data[i].subCategoryCredentials ? data[i].subCategoryCredentials[0].src : ""}" alt="cart products">
                                                    </a>
                                                    <div class="minicart-product-details">
                                                        <h6><a href="/home/details/${data[i].id}">${data[i].name}</a></h6>
                                                        <span class="shop-item-price" data-price="${data[i].price}" data-count="${existed.count}" >$${data[i].price} x ${existed.count}</span>
                                                    </div>
                                                    <a class="shop-item-close" data-id="${data[i].id}">
                                                        <i class="fa fa-close"></i>
                                                    </a>
                                                </li>`;
                        price += data[i].price * existed.count
                    }
                    unitCount = splited.length;
                    $('.hm-minicart .minicart-product-list').append(item);
                    $('.shop-price-icon').html(`$${price}<span class="cart-item-count">${unitCount}</span>`)
                    $('.shop-price-banner').text(`$${price}`)
                    localStorage.setItem("shoping-keys-price", price)
                    localStorage.setItem("shoping-keys-count", unitCount)
                },

            });
            }


    }
        function ClickCartInit() {
            $(document).on('click', '.add-cart a',function (e) {
                e.preventDefault()
                var id = $(this).attr('data-id');
                if (id) {
                    $.get("@Url.Action("GetShopItem","Home")/" + id, function (data) {
                    Swal.fire(
                        'Added to Cart!'
                    )
                    if (!localStorage.getItem("shoping-keys")) {
                        localStorage.setItem("shoping-keys", id)
                        $('.hm-minicart .minicart-product-list').empty();
                        var item = `<li id="li${id}">
                                                    <a href="/home/details/${id}" class="minicart-product-image">
                                                        <img src="@(Context.Request.Scheme + "://" + Context.Request.Host.Value)/uploads/${data.subCategoryCredentials ? data.subCategoryCredentials[0].src : ""}" alt="cart products">
                                                    </a>
                                                    <div class="minicart-product-details">
                                                        <h6><a href="/home/details/${id}">${data.name}</a></h6>
                                                        <span class="shop-item-price" data-price="${data.price}" data-count="${1}">$${data.price} x 1</span>
                                                    </div>
                                                    <a class="shop-item-close" data-id="${id}">
                                                        <i class="fa fa-close"></i>
                                                    </a>
                                                </li>`;
                        $('.hm-minicart .minicart-product-list').append(item);

                        var price = 0;
                        var unitCount = 0;
                        if (localStorage.getItem("shoping-keys-price")) {
                           price = parseFloat(localStorage.getItem("shoping-keys-price"))
                        }
                        if (localStorage.getItem("shoping-keys-count")) {
                            unitCount =  parseInt(localStorage.getItem("shoping-keys-count"))
                        }
                        var newPrice = price + data.price
                        var newUnitCount = unitCount + 1;
                        $('.shop-price-icon').html(`$${newPrice}<span class="cart-item-count">${newUnitCount}</span>`)
                        $('.shop-price-banner').text(`$${newPrice}`)
                        localStorage.setItem("shoping-keys-price", newPrice)
                        localStorage.setItem("shoping-keys-count", newUnitCount)
                    }
                    else {
                        console.log('else state')
                        var keysString = localStorage.getItem("shoping-keys");
                        var keys = keysString.split(",");
                        var exists = keys.includes(id);
                        if (exists) {
                            localStorage.setItem("shoping-keys", keysString + "," + id)
                            keysString = keysString + "," + id;
                            keys = keysString.split(",");
                            var number = keys.filter(x => x === id).length
                            var item = ` <a href="/home/details/${id}" class="minicart-product-image">
                                                        <img src="@(Context.Request.Scheme + "://" + Context.Request.Host.Value)/uploads/${data.subCategoryCredentials ? data.subCategoryCredentials[0].src : ""}" alt="cart products">
                                                    </a>
                                                    <div class="minicart-product-details">
                                                        <h6><a href="/home/details/${id}">${data.name}</a></h6>
                                                        <span class="shop-item-price" data-price="${data.price}" data-count="${number}" >$${data.price} x ${number}</span>
                                                    </div>
                                                    <a class="shop-item-close" data-id="${id}">
                                                        <i class="fa fa-close"></i>
                                                    </a>`;
                            $("#li" + id).html(item);
                            var price = 0;
                            var unitCount = 0;
                            if (localStorage.getItem("shoping-keys-price")) {
                                price = parseFloat(localStorage.getItem("shoping-keys-price"))
                            }
                            if (localStorage.getItem("shoping-keys-count")) {
                                unitCount = parseInt(localStorage.getItem("shoping-keys-count"))
                            }
                            var newPrice = price + data.price
                            var newUnitCount = unitCount + 1;
                            $('.shop-price-icon').html(`$${newPrice}<span class="cart-item-count">${newUnitCount}</span>`)
                            $('.shop-price-banner').text(`$${newPrice}`)
                            localStorage.setItem("shoping-keys-price", newPrice)
                            localStorage.setItem("shoping-keys-count", newUnitCount)
                        }
                        else {
                            var keysString = localStorage.getItem("shoping-keys");
                            localStorage.setItem("shoping-keys", keysString + "," + id)
                            var item = `<li id="li${id}">
                                                    <a href="/home/details/${id}" class="minicart-product-image">
                                                        <img src="@(Context.Request.Scheme + "://" + Context.Request.Host.Value)/uploads/${data.subCategoryCredentials ? data.subCategoryCredentials[0].src : ""}" alt="cart products">
                                                    </a>
                                                    <div class="minicart-product-details">
                                                        <h6><a href="/home/details/${id}">${data.name}</a></h6>
                                                        <span class="shop-item-price" data-price="${data.price}" data-count="${1}">$${data.price} x 1</span>
                                                    </div>
                                                    <a class="shop-item-close" data-id="${id}">
                                                        <i class="fa fa-close"></i>
                                                    </a>
                                                </li>`;
                            $('.hm-minicart .minicart-product-list').append(item);
                            var price = 0;
                            var unitCount = 0;
                            if (localStorage.getItem("shoping-keys-price")) {
                                price = parseFloat(localStorage.getItem("shoping-keys-price"))
                            }
                            if (localStorage.getItem("shoping-keys-count")) {
                                unitCount = parseInt(localStorage.getItem("shoping-keys-count"))
                            }
                            var newPrice = price + data.price
                            var newUnitCount = unitCount + 1;
                            $('.shop-price-icon').html(`$${newPrice}<span class="cart-item-count">${newUnitCount}</span>`)
                            $('.shop-price-banner').text(`$${newPrice}`)
                            localStorage.setItem("shoping-keys-price", newPrice)
                            localStorage.setItem("shoping-keys-count", newUnitCount)
                        }

                    }

                })
                }

                })
        }
    function ClickCartInitWishList() {
        $('.add-wishlist a').click(function (e) {
            e.preventDefault()
            var id = $(this).attr('data-id');
            var count = 0;
            var items = localStorage.getItem('wishlist')
            if (items) {
                var keys = items.split(',')
                if (!keys.includes(id)) {
                    items += ',';
                    items += id;
                    count = keys.length;
                    localStorage.setItem('wishlist', items);
                    $('.wishlist-item-count').text(count+1);
                    Swal.fire('Added to Wishlist!');
                }
                else {
                    Swal.fire('Item is already in Wishlist!')
                }
            }
            else {
                count += 1;
                $('.wishlist-item-count').text(count);
                localStorage.setItem('wishlist', id);
                Swal.fire('Added to Wishlist!');
            }
        })
    }
    function LoadWishList() {
        var data = localStorage.getItem("wishlist")
        count = 0
        if (data) {
            var items = data.split(',')
            count = items.length;
        }
        $('.wishlist-item-count').text(count);
    }
        function groupBy(val) {
            var obj = [];
            var iterator = val;
            for (var i = 0; i < iterator.length; i++) {
                var existed = obj.find(({ id }) => id === iterator[i]);
                if (existed) {
                    existed.count += 1;
                }
                else {
                    obj.push({ id: iterator[i], count: 1 })
                }
            }
            return obj;
        }
        function returnKeys(arr) {
            var obj = [];
            for (var i = 0; i < arr.length; i++) {
                obj.push(arr[i].id)
            }
            return obj;
        }
        function arrayRemove(arr, value) {

            const newArray = [];

            for (let i = 0; i < arr.length; i++) {
                if (arr[i] !== value) {
                    newArray.push(arr[i]);
                }
            }
            console.log(newArray)
            return newArray;

        }
        function RemoveItemInit() {
            $(document).on('click','.shop-item-close',function (e) {
                e.preventDefault();
                var id = $(this).attr('data-id');
                var keysString = localStorage.getItem("shoping-keys");
                var keys = keysString.split(",");
                var newkeys = arrayRemove(keys, id);

                var newString = "";
                var counter = 0;
                for (var i = 0; i < newkeys.length; i++) {
                    newString += newkeys[i];
                    newString += ","
                    counter +=1;
                }
                console.log(newString)
                if (newString.length == 0) {
                    localStorage.removeItem("shoping-keys");
                }
                else {
                    newString = newString.slice(0, -1)
                    localStorage.setItem("shoping-keys", newString);
                }
                var price = parseFloat($("#li" + id + " .shop-item-price").attr('data-price'));
                var count = parseInt($("#li" + id + " .shop-item-price").attr('data-count'));
                var priceLocal = parseFloat(localStorage.getItem("shoping-keys-price"));
                var countLocal = parseInt(localStorage.getItem("shoping-keys-count"));
                var newPrice = priceLocal - (price * count);
                var newCount = counter;
                $('.shop-price-icon').html(`$${newPrice}<span class="cart-item-count">${newCount}</span>`)
                $('.shop-price-banner').text(`$${newPrice}`)
                $('.total-price-shop').text(`$${newPrice}`)
                $('.total-price-payment').text(`$${newPrice}`)
                localStorage.setItem("shoping-keys-price", newPrice);
                localStorage.setItem("shoping-keys-count", newCount);
                $("#li" + id).remove();
                $("#tr" + id).remove();
                $("#payment" + id).remove();
            })
        }
    </script>
</body>
</html>
